composition_version: "2.0"
agent_id: LEAN_CANVAS_VALIDATOR
agent_version: "1.0"

composition_order:
  - source: _prompt_core.md
    type: base
    required: true
    description: "Core personality, identity, and responsibilities"

  - source: ${knowledge_files}
    type: knowledge
    required: false
    resolve_from: _knowledge_deps.yaml
    description: "Optional Lean Startup reference materials"

  - source: ${task_prompt}
    type: task
    required: true
    path_pattern: tasks/${task_id}.md
    description: "Specific task instructions (interview, analysis, handoff)"

  - source: ${gate_prompts}
    type: validation
    required: false
    resolve_from: tasks/${task_id}.meta.yaml#validation_gates
    description: "Quality gates for current task"

  - source: ${runtime_context}
    type: context
    required: true
    description: "Session state, user inputs, interview responses"

variables:
  project_id: ${runtime_context.project_id}
  workspace: ${runtime_context.workspace}
  user_responses: ${runtime_context.user_responses}

conflict_resolution:
  strategy: last_wins
  exceptions:
    - section: LEAN_CANVAS_FIELDS
      strategy: merge_all
      reason: "All 9 canvas fields must be collected"

notes: |
  LEAN_CANVAS_VALIDATOR is a simple 3-phase workflow:
  - Task 1 (01_canvas_interview) → Collects 9 Lean Canvas fields
  - Task 2 (02_risk_analysis) → Identifies riskiest assumptions
  - Task 3 (03_handoff) → Generates lean_canvas_summary.json

  This agent runs BEFORE VIBE_ALIGNER as part of SOP_001.
