# TECH_ECOSYSTEM_MAP.yaml
# Curated intelligence on common integrations, APIs, and tech choices
# Enables tech-stack recommendations even without live web research

version: "1.0"
last_updated: "2025-11-14"
status: "IN_PROGRESS - Schema defined, awaiting population from research"
description: >
  This knowledge base maps common product needs (payments, auth, email, etc.)
  to proven solutions with pricing, complexity, and v1.0 recommendations.
  Enables TECH_RESEARCHER to provide specific recommendations even offline.

# =================================================================
# STRUCTURE GUIDE
# =================================================================
# Each tech category includes:
# - Common solutions (top 3-5 options)
# - Pricing models (free tiers, paid plans)
# - Complexity score (integration effort)
# - V1.0 recommendation (which to use for MVP)
# - When to upgrade (scale triggers)

# =================================================================
# CATEGORY: PAYMENTS
# =================================================================

payments:
  category_id: "payment_processing"
  description: "Accept payments, manage subscriptions, handle marketplace splits"

  solutions:
    - name: "Stripe"
      website: "https://stripe.com"
      best_for: "Most use cases (B2C, B2B, subscriptions, marketplaces)"

      pricing:
        standard:
          per_transaction: "2.9% + 30¢"
          monthly_fee: "$0"
          setup_fee: "$0"

        stripe_connect:
          per_transaction: "2.9% + 30¢ + 0.25%"
          use_case: "Marketplaces (split payments)"

        subscriptions:
          per_transaction: "2.9% + 30¢"
          additional_fee: "0.5% for recurring billing"

        volume_discounts:
          available: true
          threshold: "$1M+/month"
          typical_discount: "0.1-0.3% reduction"

      complexity_score: 5  # Easy integration
      integration_time: "1-3 days"

      features:
        v1_included:
          - "Card payments (Visa, MC, Amex)"
          - "Apple Pay, Google Pay"
          - "Webhooks for events"
          - "Customer portal"
          - "Test mode (sandbox)"

        premium_features:
          - "Stripe Billing (subscriptions)"
          - "Stripe Connect (marketplaces)"
          - "Stripe Radar (fraud detection)"
          - "Stripe Sigma (analytics SQL)"

      sdks:
        languages: ["JavaScript", "Python", "Ruby", "PHP", "Go", "Java", ".NET"]
        mobile: ["iOS", "Android", "React Native", "Flutter"]

      v1_recommendation:
        use_when: "Building any payment flow (SaaS, ecommerce, marketplace)"
        complexity: "LOW"
        docs_quality: "Excellent (industry best)"

      lessons_learned:
        - "Most startups use Stripe - don't overthink this choice"
        - "Stripe Connect for marketplaces (handles splits, compliance)"
        - "Test mode is excellent for development"

      sources:
        - "https://stripe.com/pricing"
        - "Stripe docs (docs.stripe.com)"

    - name: "PayPal"
      website: "https://paypal.com"
      best_for: "International markets, buyer trust (familiar brand)"

      pricing:
        standard:
          per_transaction: "2.9% + 30¢"
          international: "4.4% + fixed fee"

      complexity_score: 6  # Slightly more complex integration
      integration_time: "2-4 days"

      v1_recommendation:
        use_when: "Need international support OR users prefer PayPal"
        complexity: "MEDIUM"
        note: "Consider Stripe unless you have specific PayPal need"

    - name: "Square"
      website: "https://squareup.com"
      best_for: "In-person + online (hybrid retail/ecommerce)"

      pricing:
        online: "2.9% + 30¢"
        in_person: "2.6% + 10¢"

      v1_recommendation:
        use_when: "Hybrid business (physical + online)"
        complexity: "LOW"

  decision_matrix:
    - scenario: "SaaS with subscriptions"
      recommendation: "Stripe Billing"
      reason: "Best subscription management, customer portal built-in"

    - scenario: "Marketplace with payment splits"
      recommendation: "Stripe Connect"
      reason: "Handles compliance, tax forms, splits automatically"

    - scenario: "Ecommerce (online only)"
      recommendation: "Stripe OR Shopify Payments (Stripe backend)"
      reason: "Stripe has best developer experience"

    - scenario: "Retail + online"
      recommendation: "Square"
      reason: "Unified in-person + online"

    - scenario: "International first"
      recommendation: "Stripe (multi-currency) OR PayPal"
      reason: "Stripe supports 135+ currencies, PayPal trusted internationally"

# =================================================================
# CATEGORY: AUTHENTICATION & AUTHORIZATION
# =================================================================

authentication:
  category_id: "auth_user_management"
  description: "User signup, login, session management, OAuth"

  solutions:
    - name: "Clerk"
      website: "https://clerk.com"
      best_for: "Fastest setup, beautiful UI components, modern SaaS"

      pricing:
        free_tier:
          mau: "10,000 monthly active users"
          features: "Email/password, OAuth, basic customization"

        pro_tier:
          price: "$25/month"
          mau: "10,000 included, then $0.02/MAU"
          features: "Advanced customization, multi-tenancy, webhooks"

      complexity_score: 2  # Extremely easy
      integration_time: "30 minutes - 2 hours"

      v1_recommendation:
        use_when: "Want fastest auth setup with beautiful UI"
        complexity: "VERY LOW"
        docs_quality: "Excellent"

    - name: "Supabase Auth"
      website: "https://supabase.com/auth"
      best_for: "Using Supabase for database, need all-in-one backend"

      pricing:
        free_tier:
          mau: "50,000"
          features: "Email/password, OAuth, magic links"

        pro_tier:
          price: "$25/month"
          mau: "100,000"

      complexity_score: 3
      integration_time: "1-3 hours"

      v1_recommendation:
        use_when: "Already using Supabase for database"
        complexity: "LOW"

    - name: "NextAuth.js"
      website: "https://next-auth.js.org"
      best_for: "Next.js apps, self-hosted, no vendor lock-in"

      pricing:
        cost: "Free (open-source)"
        hosting: "Self-hosted on your infrastructure"

      complexity_score: 5
      integration_time: "4-8 hours"

      v1_recommendation:
        use_when: "Want full control, no per-MAU costs at scale"
        complexity: "MEDIUM"
        note: "More setup time, but no ongoing MAU costs"

  decision_matrix:
    - scenario: "Want fastest setup, willing to pay"
      recommendation: "Clerk"

    - scenario: "Using Supabase for database"
      recommendation: "Supabase Auth"

    - scenario: "Need self-hosted, avoid vendor lock-in"
      recommendation: "NextAuth.js"

    - scenario: "Building on AWS, enterprise-grade"
      recommendation: "AWS Cognito"

# =================================================================
# CATEGORY: EMAIL SENDING
# =================================================================

email:
  category_id: "transactional_email"
  description: "Send transactional emails (confirmations, notifications, etc)"

  solutions:
    - name: "Resend"
      website: "https://resend.com"
      best_for: "Modern developer experience, React Email integration"

      pricing:
        free_tier: "3,000 emails/month"
        pro_tier: "$20/month for 50,000 emails"

      complexity_score: 2
      integration_time: "30 minutes"

      v1_recommendation:
        use_when: "Want modern DX, React Email templates"
        complexity: "VERY LOW"

    - name: "SendGrid"
      website: "https://sendgrid.com"
      best_for: "Established, reliable, marketing + transactional"

      pricing:
        free_tier: "100 emails/day"
        essentials: "$15/month for 50,000 emails"

      complexity_score: 3
      integration_time: "1-2 hours"

    - name: "Mailgun"
      website: "https://mailgun.com"
      best_for: "High volume, developer-focused"

      pricing:
        flex: "Pay-as-you-go, $0.80/1000 emails"

      complexity_score: 3

  decision_matrix:
    - scenario: "Modern stack, React Email"
      recommendation: "Resend"

    - scenario: "Need marketing + transactional"
      recommendation: "SendGrid"

    - scenario: "High volume, API-first"
      recommendation: "Mailgun"

# =================================================================
# CATEGORY: BACKGROUND CHECKS (MARKETPLACES)
# =================================================================

background_checks:
  category_id: "identity_verification_background_checks"
  description: "Background checks for marketplaces, gig economy platforms"

  solutions:
    - name: "Checkr"
      website: "https://checkr.com"
      best_for: "US background checks, most popular for marketplaces"

      pricing:
        per_check: "$30-50 depending on package"
        packages:
          basic: "County criminal + SSN trace"
          standard: "+ National criminal + sex offender"
          premium: "+ Motor vehicle records"

      integration_time: "1-2 days"
      turnaround_time: "1-5 days"

      used_by: ["Uber", "Lyft", "Rover", "TaskRabbit"]

      v1_recommendation:
        use_when: "US marketplace, need background checks"
        complexity: "MEDIUM"

    - name: "Onfido"
      website: "https://onfido.com"
      best_for: "Global identity verification, AI-powered"

      pricing:
        per_check: "$1-3 for document verification"
        per_check: "$30-50 for background checks"

      v1_recommendation:
        use_when: "International marketplace"

# =================================================================
# CATEGORY: COMMUNICATION (MESSAGING)
# =================================================================

messaging:
  category_id: "in_app_messaging_sms"
  description: "In-app chat, SMS, real-time messaging"

  solutions:
    - name: "Twilio"
      website: "https://twilio.com"
      best_for: "SMS, voice, video (established, reliable)"

      pricing:
        sms_us: "$0.0079 per message"
        sms_international: "$0.05-0.20 per message"

      v1_recommendation:
        use_when: "Need SMS notifications, 2FA"
        complexity: "LOW"

    - name: "SendBird"
      website: "https://sendbird.com"
      best_for: "In-app chat (chat UI components)"

      pricing:
        free_tier: "Up to 50 MAU"
        starter: "$399/month"

      v1_recommendation:
        use_when: "Need full chat feature (not just SMS)"
        complexity: "MEDIUM"

    - name: "Stream Chat"
      website: "https://getstream.io"
      best_for: "Real-time chat with great UI components"

      pricing:
        free_tier: "Up to 25 MAU"
        growth: "$499/month"

# =================================================================
# CATEGORY: CALENDAR INTEGRATION
# =================================================================

calendar:
  category_id: "calendar_scheduling_sync"
  description: "Calendar sync, scheduling, availability management"

  solutions:
    - name: "Google Calendar API"
      best_for: "Most common calendar integration"

      pricing:
        cost: "Free (with quota limits)"
        quota: "1,000,000 requests/day"

      complexity_score: 6
      integration_time: "1-2 days"

      challenges:
        - "OAuth flow setup (complex)"
        - "Time zone handling (notorious complexity)"
        - "Sync delays (not real-time)"

      v1_recommendation:
        use_when: "Need calendar integration (standard approach)"
        complexity: "MEDIUM-HIGH"

    - name: "Cal.com API"
      best_for: "Embed scheduling into your app"

      pricing:
        self_hosted: "Free (open-source)"
        cloud: "$12/user/month"

# =================================================================
# FUTURE CATEGORIES TO ADD
# =================================================================
# After Gemini research:
# - File storage (S3, Cloudflare R2, UploadThing)
# - CDN (Cloudflare, Vercel Edge, AWS CloudFront)
# - Database (PostgreSQL, MongoDB, Supabase)
# - Search (Algolia, Meilisearch, Typesense)
# - Analytics (PostHog, Mixpanel, Amplitude)
# - Error tracking (Sentry, Rollbar, Bugsnag)
# - Monitoring (Datadog, New Relic, Grafana)
# - Hosting (Vercel, Railway, Fly.io, AWS)
# - CI/CD (GitHub Actions, CircleCI, GitLab)
# - Feature flags (LaunchDarkly, PostHog, Flagsmith)

# =================================================================
# USAGE EXAMPLES
# =================================================================

usage_examples:
  by_tech_researcher:
    scenario: "User needs payment processing for marketplace"
    flow: >
      1. Load TECH_ECOSYSTEM_MAP.payments
      2. Match scenario: "marketplace with payment splits"
      3. Recommendation: "Stripe Connect"
      4. Provide pricing: 2.9% + 30¢ + 0.25%
      5. Complexity: LOW (5/10)
      6. Integration time: 1-3 days

  by_vibe_aligner:
    scenario: "User lists 'payment processing' as feature"
    flow: >
      1. Check TECH_ECOSYSTEM_MAP.payments
      2. Auto-suggest: "Stripe (industry standard)"
      3. Add to dependencies in feature_spec.json
      4. Flag complexity: 5 points
      5. Estimated effort: 1-3 days

# =================================================================
# DATA SOURCES
# =================================================================

sources:
  pricing: "Official pricing pages (verified quarterly)"
  complexity: "Developer surveys, job postings, integration time estimates"
  recommendations: "Based on patterns from 100+ successful startups"
  verification: "Multi-source validation (official docs + community feedback)"
